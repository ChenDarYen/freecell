(function(t){function e(e){for(var n,o,s=e[0],c=e[1],l=e[2],d=0,f=[];d<s.length;d++)o=s[d],i[o]&&f.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==i[c]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={app:0},r=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/freecell/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"097e":function(t,e,a){},"25ca":function(t,e,a){"use strict";var n=a("097e"),i=a.n(n);i.a},"36d7":function(t,e,a){},"49bb":function(t,e,a){t.exports=a.p+"img/alert.6dbd3667.svg"},"5c0b":function(t,e,a){"use strict";var n=a("5e27"),i=a.n(n);i.a},"5e27":function(t,e,a){},c6f3:function(t,e,a){"use strict";var n=a("36d7"),i=a.n(n);i.a},cd49:function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],o=(a("5c0b"),a("2877")),s={},c=Object(o["a"])(s,i,r,!1,null,null,null),l=c.exports,u=a("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("nav",{staticClass:"sidebar"},[n("ul",[n("li",[n("img",{attrs:{src:a("fff3"),width:"60px"},on:{click:function(e){return t.dsiplayModal("newGame")}}})]),n("li",[n("img",{attrs:{src:a("fdf0"),width:"88px"},on:{click:function(e){return t.dsiplayModal("restart")}}})]),n("li",[n("img",{attrs:{src:a("ee2a"),width:"60px"},on:{click:t.undo}})])])]),n("div",{staticClass:"board",attrs:{"data-action":t.canAction}},[t._l(16,function(e){return n("div",{key:e,staticClass:"cellWall"},[n("div",{class:t.determineCell(e),attrs:{"data-name":e+"-"+t.determineCell(e)}})])}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isWin,expression:"isWin"}],staticClass:"winning"},[n("p",[t._v("Congratulations")]),n("div",{staticClass:"btn-container"},[n("div",[n("button",{staticClass:"btn",on:{click:t.newGame}},[t._v("start a new game")])]),n("div",[n("button",{staticClass:"btn btn-sub",on:{click:t.restart}},[t._v("restart this game")])])])]),t._l(t.deck,function(e,a){return n("div",{directives:[{name:"drag",rawName:"v-drag"}],key:e+a,staticClass:"card",class:"border-"+e.color,attrs:{"data-legal":"","data-tableau":"","data-index":a,"data-sibling":JSON.stringify(e.siblings),"data-cell":e.cell},on:{mousedown:t.changeZIndex,mouseup:t.mouseup}},[t._v("\n      "+t._s(e.point)+"\n      "+t._s(e.suit)+"\n    ")])}),t._m(0)],2),n("Modal",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"modal",attrs:{messages:t.messages,btnMsg:t.btnMsg},on:{act:t.act,hide:t.hideModal}})],1)},f=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logo"},[n("img",{attrs:{src:a("e347")}})])}],h=(a("c5f6"),a("ffc1"),a("768b")),y=a("75fc"),v=(a("ac4d"),a("8a81"),a("ac6a"),a("b0b4")),m=a("308d"),b=a("6bb5"),p=a("4e2b"),g=a("d225"),k=a("9ab4"),x=a("60a3"),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal"},[a("div",{staticClass:"container"},[t._m(0),t._l(t.messages,function(e,n){return a("p",{key:n,staticClass:"message"},[t._v("\n      "+t._s(e)+"\n    ")])}),a("div",{staticClass:"btn-container"},[a("div",[a("button",{staticClass:"btn",on:{click:t.act}},[t._v(t._s(t.btnMsg))])]),a("div",[a("button",{staticClass:"btn btn-sub",on:{click:t.hide}},[t._v("Back to current game")])])])],2)])},A=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alert"},[n("img",{attrs:{src:a("49bb"),width:"135px"}})])}],T=function(t){function e(){return Object(g["a"])(this,e),Object(m["a"])(this,Object(b["a"])(e).apply(this,arguments))}return Object(p["a"])(e,t),Object(v["a"])(e,[{key:"act",value:function(){}},{key:"hide",value:function(){}}]),e}(x["d"]);k["a"]([Object(x["c"])(Array)],T.prototype,"messages",void 0),k["a"]([Object(x["c"])(String)],T.prototype,"btnMsg",void 0),k["a"]([Object(x["b"])()],T.prototype,"act",null),k["a"]([Object(x["b"])()],T.prototype,"hide",null),T=k["a"]([Object(x["a"])({})],T);var S=T,C=S,O=(a("25ca"),Object(o["a"])(C,w,A,!1,null,"7cbeaa39",null)),j=O.exports,M=function t(e,a,n){Object(g["a"])(this,t),this.siblings=[],this.cell="",this.point=e,this.suit=a,this.index=n,this.src="../assets/images/".concat(e,"-").concat(a,".png");var i=Math.floor(this.index/4)+1;"spade"===a||"club"===a?(this.color="black",this.point<13&&(this.siblings=[4*i+1,4*i+2])):(this.color="red",this.point<13&&(this.siblings=[4*i+0,4*i+3]))},_=function(t){function e(){var t;Object(g["a"])(this,e),t=Object(m["a"])(this,Object(b["a"])(e).call(this)),t.points=[1,2,3,4,5,6,7,8,9,10,11,12,13],t.suits=["spade","heart","diamond","club"],t.deck=[],t.history=[],t.cellsTrack={},t.cardDistRatio=.2,t.emptyCellAmount=0,t.emptyCascadeAmount=0,t.travelerHomeIndex="",t.zIndex=7,t.initializeTime=1,t.waitingTime=.5,t.canAction=!1,t.showModal=!1,t.isWin=!0,t.action="",t.messages=[],t.btnMsg="";for(var a=1;a<=16;a++){var n="".concat(a,"-").concat(t.determineCell(a));t.cellsTrack[n]=[]}return t}return Object(p["a"])(e,t),Object(v["a"])(e,[{key:"created",value:function(){this.history=localStorage.getItem("history")?JSON.parse(localStorage.getItem("history")):[],this.createDeck()}},{key:"mounted",value:function(){var t=this,e=document.querySelector(".cell"),a=document.querySelectorAll(".card"),n=e.offsetLeft,i=e.offsetTop,r=e.offsetWidth,o=e.offsetHeight,s=!0,c=!1,l=void 0;try{for(var u,d=a[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var f=u.value;f.style.top="".concat(i,"px"),f.style.left="".concat(n,"px"),f.style.width="".concat(r,"px"),f.style.height="".concat(o,"px")}}catch(h){c=!0,l=h}finally{try{s||null==d.return||d.return()}finally{if(c)throw l}}this.history.length>0?(this.cellsTrack=this.history[this.history.length-1].track,this.dsiplayModal("back")):(this.distributeCards(),setTimeout(function(){t.cardsPositioningTableau(1)},1e3*this.waitingTime))}},{key:"initialization",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isWin=!1,this.showModal=!1,this.history=[],this.zIndex=7;for(var a=1;a<=16;a++){var n="".concat(a,"-").concat(this.determineCell(a));this.cellsTrack[n]=[]}if(!e){var i=document.querySelector(".cell"),r=document.querySelectorAll(".card"),o=i.offsetLeft,s=i.offsetTop,c=!0,l=!1,u=void 0;try{for(var d,f=function(){var e=d.value;e.style.transition="all ".concat(t.initializeTime,"s"),e.style.top="".concat(s,"px"),e.style.left="".concat(o,"px"),setTimeout(function(){e.style.transition=""},1e3*t.initializeTime)},h=r[Symbol.iterator]();!(c=(d=h.next()).done);c=!0)f()}catch(y){l=!0,u=y}finally{try{c||null==h.return||h.return()}finally{if(l)throw u}}}}},{key:"determineCell",value:function(t){return t<=4?"cell":t<=8?"foundation":"cascade"}},{key:"createDeck",value:function(){this.deck=[];var t=0,e=!0,a=!1,n=void 0;try{for(var i,r=this.points[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value,s=!0,c=!1,l=void 0;try{for(var u,d=this.suits[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var f=u.value;this.deck.push(new M(o,f,t)),t+=1}}catch(h){c=!0,l=h}finally{try{s||null==d.return||d.return()}finally{if(c)throw l}}}}catch(h){a=!0,n=h}finally{try{e||null==r.return||r.return()}finally{if(a)throw n}}}},{key:"recordHistory",value:function(){var t={track:JSON.parse(JSON.stringify(this.cellsTrack)),from:this.travelerHomeIndex,emptyCellAmount:this.emptyCellAmount,emptyCascadeAmount:this.emptyCascadeAmount};this.history.push(t),localStorage.setItem("history",JSON.stringify(this.history))}},{key:"distributeCards",value:function(){document.querySelectorAll(".card");for(var t=Object(y["a"])(this.deck),e=0;e<52;e++){var a="".concat(e%8+9,"-cascade"),n=Math.floor(Math.random()*t.length);this.cellsTrack[a]=[].concat(Object(y["a"])(this.cellsTrack[a]),[t[n].index]),this.deck[t[n].index].cell=a,t.splice(n,1)}this.emptyCellAmount=4,this.emptyCascadeAmount=0,this.recordHistory()}},{key:"writeDataCell",value:function(t){var e=this.cellsTrack[t],a=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var s=r.value;this.$set(this.deck[s],"cell",t)}}catch(c){n=!0,i=c}finally{try{a||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"cardsPositioningTableau",value:function(t){var e=this;this.canAction=!1;for(var a=function(a){var n='[data-name="'.concat(a,'"]'),i=document.querySelector(n),r=parseInt(a,10),o=i.offsetHeight,s=i.offsetLeft,c=i.offsetTop,l=e.cellsTrack[a],u=document.querySelectorAll(".card"),d=function(a){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=u[a];i.style.transition="all ".concat(t,"s"),i.style.left="".concat(s,"px"),i.style.top="".concat(c+n*o*e.cardDistRatio,"px"),i.style.zIndex="".concat(n),setTimeout(function(){i.style.transition=""},1e3*t)};if(l.length>0)if(r<5){var f=l[0];d(f)}else if(r<9){var y=!0,v=!1,m=void 0;try{for(var b,p=l[Symbol.iterator]();!(y=(b=p.next()).done);y=!0){var g=b.value;d(g)}}catch(j){v=!0,m=j}finally{try{y||null==p.return||p.return()}finally{if(v)throw m}}}else{var k=!0,x=!1,w=void 0;try{for(var A,T=l.entries()[Symbol.iterator]();!(k=(A=T.next()).done);k=!0){var S=Object(h["a"])(A.value,2),C=S[0],O=S[1];d(O,e.cardDistRatio,C)}}catch(j){x=!0,w=j}finally{try{k||null==T.return||T.return()}finally{if(x)throw w}}}},n=function(t){for(var a=document.querySelectorAll(".card"),n=e.cellsTrack[t],i="",r=0,o=[],s=n.length-1;s>=0;s--){var c=e.deck[n[s]],l=c.color,u=c.point,d=n[s],f=(e.emptyCellAmount+1)*(e.emptyCascadeAmount+1);(s===n.length-1||l!==i&&u===r+1)&&n.length-s<=f?(o.push(d),i=l,r=u,a[d].setAttribute("data-legal","true"),a[d].setAttribute("data-tableau",JSON.stringify(o))):a[d].setAttribute("data-legal","false")}},i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];if(0===r.length)for(var s=0,c=Object.entries(this.cellsTrack);s<c.length;s++){var l=Object(h["a"])(c[s],1),u=l[0];n(u),a(u)}else for(var d=0,f=r;d<f.length;d++){u=f[d];n(u),a(u)}setTimeout(function(){e.canAction=!0},1e3*t)}},{key:"changeZIndex",value:function(t){var e="true"===t.currentTarget.getAttribute("data-legal");if(e){var a=document.querySelectorAll(".card"),n=JSON.parse(t.currentTarget.getAttribute("data-tableau")),i=!0,r=!1,o=void 0;try{for(var s,c=n.reverse()[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=s.value;a[l].style.zIndex="".concat(this.zIndex),this.zIndex=this.zIndex+1}}catch(u){r=!0,o=u}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}}}},{key:"connect",value:function(t){var e=this,a=t.currentTarget,n="true"===a.getAttribute("data-legal");if(n){var i=document.querySelectorAll(".card"),r=Number(a.getAttribute("data-index")),o=a.getAttribute("data-cell"),s={x:a.offsetLeft,y:a.offsetTop},c=(JSON.parse(a.getAttribute("data-tableau")),JSON.parse(a.getAttribute("data-tableau")).length),l=20,u=.2,d=!1,f=function(t){var e={x:t.offsetLeft,y:t.offsetTop};return Math.abs(s.x-e.x)<l&&Math.abs(s.y-e.y)<l},v=function(){a.style.zIndex="".concat(e.zIndex),e.cardsPositioningTableau(u,o),e.zIndex=e.zIndex+1},m=function(t){var a=e.cellsTrack[o].length,n=e.cellsTrack[o].splice(a-c,c);e.cellsTrack[t]=[].concat(Object(y["a"])(e.cellsTrack[t]),Object(y["a"])(n))},b=function(t){var a=parseInt(o,10),n=parseInt(t,10);0===e.cellsTrack[o].length&&(a<5?e.emptyCellAmount=e.emptyCellAmount+1:a>8&&(e.emptyCascadeAmount=e.emptyCascadeAmount+1)),e.cellsTrack[t].length===c&&(n<5?e.emptyCellAmount=e.emptyCellAmount-1:n>8&&(e.emptyCascadeAmount=e.emptyCascadeAmount-1))},p=function(t,a){arguments.length>2&&void 0!==arguments[2]&&arguments[2];m(a),b(a),e.travelerHomeIndex=o,e.cardsPositioningTableau(t),e.writeDataCell(a),e.recordHistory(),d=!0},g=JSON.parse(a.getAttribute("data-sibling")),k=!0,x=!1,w=void 0;try{for(var A,T=g[Symbol.iterator]();!(k=(A=T.next()).done);k=!0){var S=A.value,C=i[S],O=this.deck[C.getAttribute("data-index")],j=C.getAttribute("data-cell"),M=this.cellsTrack[j],_=M[M.length-1]===O.index;if(_&&f(C)){p(u,j,this.cardDistRatio);break}}}catch($){x=!0,w=$}finally{try{k||null==T.return||T.return()}finally{if(x)throw w}}if(!d){for(var I=0,q=Object.entries(this.cellsTrack);I<q.length;I++){var z=Object(h["a"])(q[I],2),N=z[0],J=z[1],P=document.querySelector('[data-name="'.concat(N,'"]')),D=J.length,H=parseInt(N,10);if(H<5){if(0===D&&1===c&&f(P)){p(u,N);break}}else if(H<9){var W=J.length?J[J.length-1]:-10;if((r<5||r===W+4)&&f(P)){p(u,N);break}}else if(0===D&&f(P)){p(u,N);break}}d?this.checkStatus():v()}}}},{key:"checkStatus",value:function(){for(var t=!0,e=0;e<4;e++){var a=51-e,n=parseInt(this.deck[a].cell,10);(n<5||n>8)&&(t=!1)}if(t){this.isWin=!0;var i=document.querySelector(".winning"),r=i.offsetWidth,o=document.querySelector(".board").clientWidth,s=document.querySelector(".foundation").offsetTop,c=document.querySelector(".card").offsetHeight;i.style.left="".concat((o-r)/2,"px"),i.style.top="".concat(s+c+60,"px")}}},{key:"newGame",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=e?0:this.initializeTime+this.waitingTime;this.canAction&&(this.canAction=!1,this.initialization(e),setTimeout(function(){t.createDeck(),t.distributeCards(),t.cardsPositioningTableau(1),t.canAction=!0},1e3*a))}},{key:"restart",value:function(){var t=this;if(this.canAction){this.canAction=!1;var e=this.history[0].track;this.initialization(),setTimeout(function(){t.createDeck(),t.cellsTrack=e,t.cardsPositioningTableau(1),t.recordHistory(),t.canAction=!0},1e3*(this.initializeTime+this.waitingTime))}}},{key:"undo",value:function(){if(this.history.length>1){var t=this.history[this.history.length-2];this.cellsTrack=JSON.parse(JSON.stringify(t.track)),this.emptyCellAmount=t.emptyCellAmount,this.emptyCascadeAmount=t.emptyCascadeAmount,this.writeDataCell(this.history[this.history.length-1].from),this.history.pop(),this.cardsPositioningTableau(.5)}}},{key:"back",value:function(){this.canAction=!0,this.newGame(!0)}},{key:"hideModal",value:function(){if(this.showModal=!1,"back"===this.action){this.cardsPositioningTableau(1);for(var t=9;t<=16;t++){var e="".concat(t,"-cascade");this.writeDataCell(e)}}}},{key:"act",value:function(){this[this.action]()}},{key:"dsiplayModal",value:function(t){this.action=t,"newGame"===t?(this.messages=["Do you want to start a new game?","This will quit the current game."],this.btnMsg="start a new game",this.showModal=!0):"restart"===t?(this.messages=["Do you want to restart the current game?","This will undo all your moves."],this.btnMsg="restart the current game",this.showModal=!0):"back"===t&&(this.messages=["You have a game in progress."],this.btnMsg="start a new game",this.showModal=!0),document.querySelector(".modal").style.zIndex="".concat(this.zIndex)}},{key:"mouseup",value:function(t){this.connect(t),this.checkStatus()}}]),e}(x["d"]);_=k["a"]([Object(x["a"])({directives:{drag:{bind:function(t,e){e.value;var a=t;a.onmousedown=function(t){var e=document.querySelector(".board"),n="true"===e.getAttribute("data-action");if(n){a.getAttribute("data-index");var i="true"===a.getAttribute("data-legal");if(i){t.stopPropagation();var r=a.offsetWidth,o=a.offsetHeight,s=document.querySelector(".board").clientWidth,c=document.querySelector(".board").clientHeight,l=document.querySelectorAll(".card"),u=JSON.parse(a.getAttribute("data-tableau")),d=[],f=!0,y=!1,v=void 0;try{for(var m,b=u[Symbol.iterator]();!(f=(m=b.next()).done);f=!0){var p=m.value,g=l[p],k=t.clientX-g.offsetLeft,x=t.clientY-g.offsetTop;d.push({x:k,y:x})}}catch(w){y=!0,v=w}finally{try{f||null==b.return||b.return()}finally{if(y)throw v}}document.onmousemove=function(t){var e=!0,a=!0,n=!1,i=void 0;try{for(var f,y=u.entries()[Symbol.iterator]();!(a=(f=y.next()).done);a=!0){var v=Object(h["a"])(f.value,1),m=v[0],b=d[m].x,p=d[m].y;if(t.clientX-b<0||t.clientX-b+r-s>0||t.clientY-p<0||t.clientY-p+o-c>0){e=!e;break}}}catch(w){n=!0,i=w}finally{try{a||null==y.return||y.return()}finally{if(n)throw i}}if(e){var g=!0,k=!1,x=void 0;try{for(var A,T=u.entries()[Symbol.iterator]();!(g=(A=T.next()).done);g=!0){var S=Object(h["a"])(A.value,2),C=(m=S[0],S[1]),O=l[C];b=d[m].x,p=d[m].y;O.style.left="".concat(t.clientX-b,"px"),O.style.top="".concat(t.clientY-p,"px")}}catch(w){k=!0,x=w}finally{try{g||null==T.return||T.return()}finally{if(k)throw x}}}},a.onmouseup=function(){document.onmousemove=null,a.onmouseup=null}}}}}}},components:{Modal:j}})],_);var I=_,q=I,z=(a("c6f3"),Object(o["a"])(q,d,f,!1,null,"7abdf392",null)),N=z.exports;n["a"].use(u["a"]);var J=new u["a"]({mode:"hash",base:"/freecell/",routes:[{path:"/",name:"home",component:N}]});n["a"].config.productionTip=!1,new n["a"]({router:J,render:function(t){return t(l)}}).$mount("#app")},e347:function(t,e,a){t.exports=a.p+"img/logo.ba0c755b.svg"},ee2a:function(t,e,a){t.exports=a.p+"img/undo.bea7376e.svg"},fdf0:function(t,e,a){t.exports=a.p+"img/restart.5a3e743c.svg"},fff3:function(t,e,a){t.exports=a.p+"img/new.d97cb4ca.svg"}});
//# sourceMappingURL=app.4550b522.js.map